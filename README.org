#+title: Arch Linux - wayland config
#+author: Atri Hegde
#+description: An archlinux installer that will install base system with Hyprland.

* ArchInstall for wayland
Installs arch on target computer with wayland packages.

** Prepare for live environment for installation
Install archlinux-keyring, keyboard config, set ntp and allow parallel downloads
#+begin_src sh
#######################################################
# part1: make necassary partitions and chroot into it #
#######################################################
printf '\033c'
echo "----------------------------------------------"
echo "|        hegde_atri's arch installer         |"
echo "----------------------------------------------"
sed -i "s/^#ParallelDownloads = 5$/ParallelDownloads = 15/" /etc/pacman.conf
pacman --noconfirm -Sy archlinux-keyring
loadkeys uk
timedatectl set-ntp true
#+end_src

** Partitioning the drive
I delete all my previous partitions and pratition it as follows
- 512M: EFI partition
- <RAM-size>: Swap partition
- Rest of space left: ext4

#+begin_src sh
printf '\033c'
lsblk
echo -n "Enter drive name: "
read -r drive
cfdisk $drive
sleep 2
printf '\033c'
lsblk
echo -n "Enter EFI/boot partition: "
read -r efipartition
mkfs.vfat -F 32 $efipartition
sleep 2
printf '\033c'
lsblk
echo -n "Enter swap partition: "
read -r swappartition
sleep 2
mkswap $swappartition
sleep 2
printf '\033c'
lsblk
echo -n "Enter your root partition: "
read -r rootpartition
mkfs.ext4 $rootpartition
sleep 2
printf '\033c'
sleep 2
mount $rootpartition /mnt
mount --mkdir $efipartition /mnt/boot
swapon $swappartition
#+end_src

** Pacstrap
Pacstrap ~/mnt~, and then ~genfstab~ which writed the partition details to ~/mnt/etc/fstab~.

#+begin_src
pacstrap /mnt base base-devel linux linux-firmware
genfstab -U /mnt >> /mnt/etc/fstab
#+end_src

** Arch-chroot into the machine
First we need to copy our script from part 2 into the machine for it to be executed.

#+begin_src sh
sed '1,/^#p2start$/d' $(basename $0) > /mnt/archinstall2.sh
chmod +x /mnt/archinstall2.sh
echo "-----------------------------------------"
echo "| arch-chrooting into your machine now! |"
echo "-----------------------------------------"
sleep 2
arch-chroot /mnt ./archinstall2.sh
exit
#+end_src

** Start "part 2" of our script
#+begin_src sh
#p2start
#################################
# part2: arch-chroot and config #
#################################
printf '\033c'
#+end_src

#+begin_src

#+end_src

#+begin_src

#+end_src

#+begin_src

#+end_src

#+begin_src

#+end_src




** Install packages

#+begin_src

#+end_src
